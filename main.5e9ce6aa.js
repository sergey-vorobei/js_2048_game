parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"jMHV":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tile=void 0;var o=function(){function t(n){e(this,t),this.value=Math.random()<.9?2:4,this.coords={row:n.row,cell:n.cell,index:n.index},this.htmlElement=void 0}return n(t,[{key:"setHtmlElement",value:function(e){this.htmlElement=e}},{key:"addTileToPage",value:function(e){e.append(this.htmlElement)}},{key:"removeHtmlElement",value:function(){this.htmlElement.remove()}},{key:"setNewCoords",value:function(e,t){this.coords={row:e,cell:t,index:t+4*e}}}]),t}();exports.Tile=o;
},{}],"KzBQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Grid=void 0;var t=require("./Tile");function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function e(t,i){for(var e=0;e<i.length;e++){var l=i[e];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function l(t,i,l){return i&&e(t.prototype,i),l&&e(t,l),t}var r=function(){function e(t){i(this,e),this.view=t,this.currentScore=0,this.currentMargeTile=0,this.checkedToAddTile=!1,this.matrix=[[null,null,null,null],[null,null,null,null],[null,null,null,null],[null,null,null,null]],this.init()}return l(e,[{key:"init",value:function(){this.addTile(),this.addTile(),this.view.update(this.matrix)}},{key:"getAllEmptyCells",value:function(){var t=[];return this.matrix.forEach(function(i,e){i.forEach(function(i,l){null===i&&t.push({row:e,cell:l,index:l+4*e})})}),t}},{key:"getRandomEmptyCell",value:function(){var t=this.getAllEmptyCells();if(t.length)return t[Math.floor(Math.random()*t.length)]}},{key:"addTile",value:function(){var i=new t.Tile(this.getRandomEmptyCell());i.setHtmlElement(this.view.createTileElement()),i.addTileToPage(this.view.tileContainer),this.matrix[i.coords.row][i.coords.cell]=i}},{key:"isGameOver",value:function(){for(var t=0;t<this.matrix.length;t++)for(var i=0;i<this.matrix.length-1;i++){if(this.matrix[t][i]&&this.matrix[t][i+1]&&this.matrix[t][i].value===this.matrix[t][i+1].value)return!1;if(this.matrix[i][t]&&this.matrix[i+1][t]&&this.matrix[i][t].value===this.matrix[i+1][t].value)return!1;if(this.getAllEmptyCells().length>0)return!1}return!0}},{key:"moveTilesOnXAxis",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=0;i<this.matrix.length;i++)for(var e=t?this.matrix.length-1:0,l=t?e-1:1,r=t?-1:1;l<this.matrix.length&&l>=0;)this.matrix[i][l]?this.matrix[i][e]?this.matrix[i][e].value===this.matrix[i][l].value?(this.matrix[i][e].value*=2,this.checkedToAddTile=!0,this.currentScore+=this.matrix[i][e].value,this.currentMargeTile=this.matrix[i][e].value,this.matrix[i][l].setNewCoords(i,e),this.view.setTilePosition(this.matrix[i][e]),this.view.setTilePosition(this.matrix[i][l]),this.matrix[i][l].removeHtmlElement(),this.matrix[i][l]=null,e+=r,l+=r):(e+=r)===l&&(l+=r):(this.matrix[i][e]=this.matrix[i][l],this.matrix[i][e].setNewCoords(i,e),this.matrix[i][l]=null,l+=r,this.checkedToAddTile=!0):l+=r}},{key:"moveTilesOnYAxis",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=0;i<this.matrix.length;i++)for(var e=t?this.matrix.length-1:0,l=t?e-1:1,r=t?-1:1;l<this.matrix.length&&l>=0;)this.matrix[l][i]?this.matrix[e][i]?this.matrix[e][i].value===this.matrix[l][i].value?(this.matrix[e][i].value*=2,this.checkedToAddTile=!0,this.currentScore+=this.matrix[e][i].value,this.currentMargeTile=this.matrix[e][i].value,this.view.setTilePosition(this.matrix[e][i]),this.view.setTilePosition(this.matrix[l][i]),this.matrix[l][i].removeHtmlElement(),this.matrix[l][i]=null,e+=r,l+=r):(e+=r)===l&&(l+=r):(this.matrix[e][i]=this.matrix[l][i],this.matrix[e][i].setNewCoords(e,i),this.matrix[l][i]=null,l+=r,this.checkedToAddTile=!0):l+=r}},{key:"addTileAfterMove",value:function(){this.checkedToAddTile&&this.addTile(),this.checkedToAddTile=!1}},{key:"moveLeft",value:function(){this.moveTilesOnXAxis(),this.addTileAfterMove()}},{key:"moveRight",value:function(){this.moveTilesOnXAxis(!0),this.addTileAfterMove()}},{key:"moveUp",value:function(){this.moveTilesOnYAxis(),this.addTileAfterMove()}},{key:"moveDown",value:function(){this.moveTilesOnYAxis(!0),this.addTileAfterMove()}}]),e}();exports.Grid=r;
},{"./Tile":"jMHV"}],"LGum":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.View=void 0;var i=function(){function t(){e(this,t),this.tileContainer=document.querySelector(".game-field__tile-container"),this.cells=document.querySelectorAll(".game-field__cell"),this.gameField=document.querySelector(".game-field"),this.gameScore=document.querySelector(".game-score"),this.messageContainer=document.querySelector(".message-container")}return n(t,[{key:"printMessage",value:function(e,t){var n=document.createElement("div");n.className="message message-".concat(e),n.innerHTML="".concat(t),this.messageContainer.append(n)}},{key:"createTileElement",value:function(){return document.createElement("div")}},{key:"update",value:function(e){var t=this;e.flat().forEach(function(e){e&&(e.htmlElement.className="\n          game-field__tile game-field__tile--".concat(e.value,"\n        "),e.htmlElement.innerHTML="".concat(e.value),t.setTilePosition(e))})}},{key:"getTilePosition",value:function(e){var t=this.cells[e.coords.index],n=t.offsetTop,i=t.offsetLeft;return{top:n/this.gameField.offsetHeight*100,left:i/this.gameField.offsetWidth*100}}},{key:"setTilePosition",value:function(e){var t=this.getTilePosition(e),n=t.top,i=t.left;e.htmlElement.style.top="".concat(n,"%"),e.htmlElement.style.left="".concat(i,"%")}},{key:"resetTiles",value:function(e){e.flat().filter(function(e){return e}).forEach(function(e){return e.removeHtmlElement()})}},{key:"updateGameScore",value:function(e){this.gameScore.innerHTML=e}}]),t}();exports.View=i;
},{}],"gYOJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Game=void 0;var e=require("./Grid"),t=require("./View");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function r(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}var n=function(){function s(){i(this,s),this.score=0,this.winValue=2048,this.view=new t.View,this.grid=new e.Grid(this.view),this.handleEvent=this.handleKey.bind(this),this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.initEvents()}return r(s,[{key:"reset",value:function(){this.view.resetTiles(this.grid.matrix),this.score=0,this.view.updateGameScore(this.score),this.view.messageContainer.innerHTML="",this.removeEvents()}},{key:"initEvents",value:function(){document.addEventListener("keyup",this.handleEvent),document.addEventListener("touchstart",this.handleTouchStart,!1),document.addEventListener("touchmove",this.handleTouchMove,!1)}},{key:"removeEvents",value:function(){document.removeEventListener("keyup",this.handleEvent),document.removeEventListener("touchstart",this.handleTouchStart,!1),document.removeEventListener("touchmove",this.handleTouchMove,!1)}},{key:"handleTouchStart",value:function(e){this.firstTouch=e.touches[0],this.x1=this.firstTouch.clientX,this.y1=this.firstTouch.clientY}},{key:"handleTouchMove",value:function(e){if(!this.x1||!this.y1)return!1;this.x2=e.touches[0].clientX,this.y2=e.touches[0].clientY,this.xDiff=this.x2-this.x1,this.yDiff=this.y2-this.y1,Math.abs(this.xDiff)>Math.abs(this.yDiff)?this.xDiff>0?this.grid.moveRight():this.grid.moveLeft():this.yDiff>0?this.grid.moveDown():this.grid.moveUp(),this.x1=null,this.y1=null,this.score=this.grid.currentScore,this.view.updateGameScore(this.grid.currentScore),this.view.update(this.grid.matrix),this.winValue===this.grid.currentMargeTile&&(this.removeEvents(),this.view.printMessage("win","\n        Winner! Congrats! You did it!\n      ")),!this.grid.getAllEmptyCells().length&&this.grid.isGameOver()&&(this.removeEvents(),this.view.printMessage("lose","\n        You lose! Restart the game?\n      "))}},{key:"handleKey",value:function(e){switch(e.key){case"ArrowLeft":this.grid.moveLeft();break;case"ArrowRight":this.grid.moveRight();break;case"ArrowUp":this.grid.moveUp();break;case"ArrowDown":this.grid.moveDown()}this.score=this.grid.currentScore,this.view.updateGameScore(this.grid.currentScore),this.view.update(this.grid.matrix),this.winValue===this.grid.currentMargeTile&&(this.removeEvents(),this.view.printMessage("win","\n        Winner! Congrats! You did it!\n      ")),!this.grid.getAllEmptyCells().length&&this.grid.isGameOver()&&(this.removeEvents(),this.view.printMessage("lose","\n        You lose! Restart the game?\n      "))}}]),s}();exports.Game=n;
},{"./Grid":"KzBQ","./View":"LGum"}],"KIzB":[function(require,module,exports) {
"use strict";var e,t=require("./Components/Game"),r=document.querySelector(".button"),s=document.querySelector(".message");r.addEventListener("click",function(){e?(e.reset(),e=new t.Game):e=new t.Game,r.classList.remove("start"),r.classList.add("restart"),r.innerHTML="Restart",s.remove()});
},{"./Components/Game":"gYOJ"}]},{},["KIzB"], null)
//# sourceMappingURL=main.5e9ce6aa.js.map